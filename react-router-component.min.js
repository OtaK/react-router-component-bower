!function(t,e){"function"==typeof define&&define.amd?define(["react","react-async"],e):t.ReactRouter=e(t.React,t.ReactAsync)}(this,function(t){var e=window.__ReactShim=window.__ReactShim||{};e.React=t,e.cloneWithProps=t.addons.cloneWithProps,e.invariant=function(t,e){if(!t)throw new Error(e)};var n=e.mergeInto=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};e.merge=function(t,e){var i={};return n(i,t),n(i,e),i},e.emptyFunction=function(){},e.ExecutionEnvironment={canUseDOM:!0},e.ReactUpdates={batchedUpdates:function(t){t()}},__ReactAsyncShim.isAsyncComponent=ReactAsync.isAsyncComponent,__ReactAsyncShim.prefetchAsyncState=ReactAsync.prefetchAsyncState,!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.ReactRouter=t()}}(function(){return function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var h="function"==typeof require&&require;if(!s&&h)return h(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e){"use strict";var n=t("./lib/Router"),i=t("./lib/Route"),o=t("./lib/Link"),r=t("./lib/RouterMixin"),a=t("./lib/AsyncRouteRenderingMixin"),s=t("./lib/RouteRenderingMixin"),h=t("./lib/NavigatableMixin"),c=t("./lib/Environment");e.exports={Locations:n.Locations,Pages:n.Pages,Location:i.Route,Page:i.Route,NotFound:i.NotFound,Link:o,Environment:c,RouterMixin:r,RouteRenderingMixin:s,AsyncRouteRenderingMixin:a,NavigatableMixin:h}},{"./lib/AsyncRouteRenderingMixin":2,"./lib/Environment":3,"./lib/Link":4,"./lib/NavigatableMixin":5,"./lib/Route":6,"./lib/RouteRenderingMixin":7,"./lib/Router":8,"./lib/RouterMixin":9}],2:[function(t,e){"use strict";var n=window.__ReactAsyncShim.prefetchAsyncState,i=window.__ReactAsyncShim.isAsyncComponent,o=window.__ReactShim.cloneWithProps,r={shouldComponentUpdate:function(t,e){if(e.pendingChildren)return!0;var o=e.match,r=o.getHandler(!0);return r&&i(r)?(n(r,function(t,e){this.isMounted()&&this.state.match===o&&this.replaceState({match:this.state.match,prefix:this.state.prefix,navigation:this.state.navigation,pendingChildren:e})}.bind(this)),!1):!0},renderRouteHandler:function(){if(this.state.pendingChildren){var t=this.state.match.route&&this.state.match.route.ref;return o(this.state.pendingChildren,{ref:t})}return this.state.match.getHandler()}};e.exports=r},{}],3:[function(t,e){"use strict";function n(){this.routers=[],this.path=this.getPath()}function i(){n.call(this)}function o(){n.call(this)}function r(){n.call(this)}var a=window.__ReactShim.ReactUpdates,s=window.__ReactShim.emptyFunction,h=window.__ReactShim.ExecutionEnvironment;n.prototype.notify=function(t,e){function n(){i-=1,e&&0===i&&e()}var i=this.routers.length;return 0===i?e&&e():void a.batchedUpdates(function(){for(var e=0,i=this.routers.length;i>e;e++)this.routers[e].setPath(this.path,t,n)}.bind(this))},n.prototype.makeHref=function(t){return t},n.prototype.navigate=function(t,e,n){return"function"==typeof e&&void 0===n&&(n=e,e={}),this.setPath(t,e,n)},n.prototype.setPath=function(t,e,n){e.isPopState||(e.replace?this.replaceState(t,e):this.pushState(t,e)),this.path=t,this.notify(e,n)},n.prototype.register=function(t){0===this.routers.length&&this.start(),t.getParentRouter()||this.routers.push(t)},n.prototype.unregister=function(t){this.routers.indexOf(t)>-1&&this.routers.splice(this.routers.indexOf(t),1),0===this.routers.length&&this.stop()},i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.getPath=function(){return window.location.pathname},i.prototype.pushState=function(t){window.history.pushState({},"",t)},i.prototype.replaceState=function(t){window.history.replaceState({},"",t)},i.prototype.start=function(){window.addEventListener("popstate",this.onPopState.bind(this))},i.prototype.stop=function(){window.removeEventListener("popstate",this.onPopState.bind(this))},i.prototype.onPopState=function(){var t=window.location.pathname;this.path!==t&&this.setPath(t,{isPopState:!0})},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.getPath=function(){return window.location.hash.slice(1)||"/"},o.prototype.pushState=function(t){window.location.hash=t},o.prototype.replaceState=function(t){var e=window.location.href.replace(/(javascript:|#).*$/,"");window.location.replace(e+"#"+t)},o.prototype.start=function(){window.addEventListener("hashchange",this.onHashChange.bind(this))},o.prototype.stop=function(){window.removeEventListener("hashchange",this.onHashChange.bind(this))},o.prototype.onHashChange=function(){var t=this.getPath();this.path!==t&&this.setPath(t,{isPopState:!0})},r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.getPath=s.thatReturnsNull,r.prototype.setPath=function(t,e){this.path=t,e()},r.prototype.start=s,r.prototype.stop=s;var c,u,p,f,l={componentDidMount:function(){this.getEnvironment().register(this)},componentWillUnmount:function(){this.getEnvironment().unregister(this)}};h.canUseDOM?(c=new i,u=new o,p=void 0!==window.history?c:u):(f=new r,c=f,u=f,p=f),e.exports={pathnameEnvironment:c,hashEnvironment:u,defaultEnvironment:p,dummyEnvironment:f,Environment:n,PathnameEnvironment:i,HashEnvironment:o,Mixin:l}},{}],4:[function(t,e){"use strict";var n=window.__ReactShim.React,i=t("./NavigatableMixin"),o=t("./Environment"),r=n.createClass({mixins:[i],displayName:"Link",propTypes:{href:n.PropTypes.string.isRequired,global:n.PropTypes.bool,globalHash:n.PropTypes.bool},onClick:function(t){this.props.onClick&&this.props.onClick(t),t.defaultPrevented||(t.preventDefault(),this._navigate(this.props.href,function(t){if(t)throw t}))},_navigationParams:function(){var t={};for(var e in this.props)this.constructor.propTypes[e]||(t[e]=this.props[e]);return t},_createHref:function(){return this.props.global?o.defaultEnvironment.makeHref(this.props.href):this.makeHref(this.props.href)},_navigate:function(t,e){return this.props.globalHash?o.hashEnvironment.navigate(t,e):this.props.global?o.defaultEnvironment.navigate(t,e):this.navigate(t,this._navigationParams(),e)},render:function(){var t={onClick:this.onClick,href:this._createHref()};return this.transferPropsTo(n.DOM.a(t,this.props.children))}});e.exports=r},{"./Environment":3,"./NavigatableMixin":5}],5:[function(t,e){"use strict";var n=window.__ReactShim.React,i=t("./Environment"),o={contextTypes:{router:n.PropTypes.component},_getNavigable:function(){return this.context.router||i.defaultEnvironment},getPath:function(){return this._getNavigable().getPath()},navigate:function(t,e){return this._getNavigable().navigate(t,e)},makeHref:function(t){return this._getNavigable().makeHref(t)}};e.exports=o},{"./Environment":3}],6:[function(t,e){"use strict";function n(t,e){var n=t.handler,i=t.path,o=t.ref,h=a({},t);delete h.path,delete h.handler,delete h.ref;var c={path:i,handler:n,props:h,ref:o};return e&&s(c,e),r("function"==typeof c.handler,"Route handler should be a component or a function but got: %s",n),r(void 0!==c.path,"Route should have an URL pattern specified: %s",n),c}function i(t){return n(t)}function o(t){return n(t,{path:null})}var r=window.__ReactShim.invariant,a=window.__ReactShim.merge,s=window.__ReactShim.mergeInto;e.exports={Route:i,NotFound:o}},{}],7:[function(t,e){"use strict";var n={renderRouteHandler:function(){return this.state.match.getHandler()}};e.exports=n},{}],8:[function(t,e){"use strict";function n(t,e){return i.createClass({mixins:[o,r],displayName:t,getRoutes:function(t){return t.children},getDefaultProps:function(){return{component:e}},render:function(){var t=this.renderRouteHandler();return this.transferPropsTo(this.props.component(null,t))}})}var i=window.__ReactShim.React,o=t("./RouterMixin"),r=t("./AsyncRouteRenderingMixin");e.exports={createRouter:n,Locations:n("Locations",i.DOM.div),Pages:n("Pages",i.DOM.body)}},{"./AsyncRouteRenderingMixin":2,"./RouterMixin":9}],9:[function(t,e){"use strict";function n(t,e){return(t+e).replace(/\/\//g,"/")}function i(t){return"[object String]"===Object.prototype.toString.call(t)}var o=window.__ReactShim.React,r=window.__ReactShim.invariant,a=window.__ReactShim.emptyFunction,s=t("./matchRoutes"),h=t("./Environment"),c={mixins:[h.Mixin],propTypes:{path:o.PropTypes.string,contextual:o.PropTypes.bool,onBeforeNavigation:o.PropTypes.func,onNavigation:o.PropTypes.func},getDefaultProps:function(){return{onBeforeNavigation:a,onNavigation:a}},childContextTypes:{router:o.PropTypes.component},getChildContext:function(){return{router:this}},contextTypes:{router:o.PropTypes.component},getInitialState:function(){return this.getRouterState(this.props)},componentWillReceiveProps:function(t){var e=this.getRouterState(t);this.replaceState(e)},getRouterState:function(t){var e,n,o=this.getParentRouter();if(t.contextual&&o){var a=o.getMatch();r(t.path||i(a.unmatchedPath),"contextual router has nothing to match on: %s",a.unmatchedPath),e=t.path||a.unmatchedPath,n=a.matchedPath}else e=t.path||this.getEnvironment().getPath(),r(i(e),"router operate in environment which cannot provide path, pass it a path prop; or probably you want to make it contextual"),n="";return"/"!==e[0]&&(e="/"+e),{match:s(this.getRoutes(t),e),prefix:n,navigation:{}}},getEnvironment:function(){return this.props.environment?this.props.environment:this.props.hash?h.hashEnvironment:this.props.contextual&&this.context.router?this.context.router.getEnvironment():h.defaultEnvironment},getParentRouter:function(){for(var t=this.context.router,e=this.getEnvironment();t;)if(t.getEnvironment()===e)return t},getMatch:function(){return this.state.match},makeHref:function(t){return n(this.state.prefix,t)},navigate:function(t,e,i){"function"==typeof e&&void 0===i&&(i=e,e={}),e=e||{},t=n(this.state.prefix,t),this.getEnvironment().setPath(t,e,i)},setPath:function(t,e,n){this.props.onBeforeNavigation(t,e),this.replaceState({match:s(this.getRoutes(this.props),t),prefix:this.state.prefix,navigation:e},function(){this.props.onNavigation(),n()}.bind(this))},getPath:function(){return this.state.match.path}};e.exports=c},{"./Environment":3,"./matchRoutes":10}],10:[function(t,e){"use strict";function n(t,e){var n,r,a;Array.isArray(t)||(t=[t]);for(var s=0,h=t.length;h>s;s++){var c=t[s];c.path&&(c.pattern=c.pattern||o(c.path),r||(n=c.pattern.match(e),n&&(r=c))),a||null!==c.path||(a=c)}return new i(e,r?r:a?a:null,n)}function i(t,e,n){this.path=t,this.route=e,this.match=n,this.unmatchedPath=this.match&&this.match._?this.match._[0]:null,this.matchedPath=this.unmatchedPath?this.path.substring(0,this.path.length-this.unmatchedPath.length):this.path}{var o=t("url-pattern"),r=window.__ReactShim.mergeInto;window.__ReactShim.invariant}i.prototype.getHandler=function(t){var e={ref:!t&&this.route?this.route.ref:void 0};return this.route&&this.match&&(r(e,this.match),r(e,this.route.props)),this.route?this.route.handler(e):void 0},e.exports=n},{"url-pattern":12}],11:[function(t,e){var n,i=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e.exports=n={getNames:function(t){var e,n,o,r;if(t instanceof RegExp)return[];for(o=/((:?:[^\/]+)|(?:[\*]))/g,n=[],r=o.exec(t);null!=r;){if(e=r[1].slice(1),"_"===e)throw new TypeError(":_ can't be used as a pattern name in pattern "+t);if(i.call(n,e)>=0)throw new TypeError("duplicate pattern name :"+e+" in pattern "+t);n.push(e||"_"),r=o.exec(t)}return n},toRegexString:function(t){return n.getNames(t).forEach(function(e){return t=t.replace(":"+e,"([^/]+)")}),"^"+t.replace(/\*/g,"(.*)")+"$"}}},{}],12:[function(t,e){var n,i;n=t("./common"),i={match:function(t){var e,n,i,o,r,a,s,h;if(o=this.regex.exec(t),null==o)return null;if(n=o.slice(1),this.isRegex)return n;for(e={},i=s=0,h=n.length;h>s;i=++s)a=n[i],r=this.names[i],"_"===r?(null==e._&&(e._=[]),e._.push(a)):e[r]=a;return e}},e.exports=function(t){var e,o;if(e=t instanceof RegExp,"string"!=typeof t&&!e)throw new TypeError("argument must be a regex or a string");return o=Object.create(i),o.isRegex=e,o.regex=e?t:new RegExp(n.toRegexString(t)),e||(o.names=n.getNames(t)),o}},{"./common":11}]},{},[1])(1)})});